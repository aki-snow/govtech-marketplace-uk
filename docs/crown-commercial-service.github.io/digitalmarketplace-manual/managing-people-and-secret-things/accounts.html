

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Adding and removing access for new starters / leavers &mdash; digitalmarketplace-manual 1.0.0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Requirements for access to production environments" href="production-access.html" />
    <link rel="prev" title="Credentials and secrets" href="credentials.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> digitalmarketplace-manual
          

          
          </a>

          
            
            
              <div class="version">
                1.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Digital Marketplace background</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../digital-marketplace-background/deportalising.html">History: From G-Cloud 5 to G-Cloud 8</a></li>
<li class="toctree-l1"><a class="reference internal" href="../digital-marketplace-background/finding-things.html">Finding Things</a></li>
<li class="toctree-l1"><a class="reference internal" href="../digital-marketplace-background/journeys.html">User Journeys on the Digital Marketplace</a></li>
<li class="toctree-l1"><a class="reference internal" href="../digital-marketplace-background/gdpr.html">GDPR</a></li>
</ul>
<p class="caption"><span class="caption-text">Developing the Digital Marketplace</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../developing-the-digital-marketplace/accessing-the-api.html">Accessing the API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developing-the-digital-marketplace/adding-repos.html">Adding a new repository</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developing-the-digital-marketplace/application-architecture.html">Application architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developing-the-digital-marketplace/browser-support.html">Browser and accessibility support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developing-the-digital-marketplace/environments.html">Environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developing-the-digital-marketplace/developer-setup.html">Developer setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developing-the-digital-marketplace/decision-records.html">Recording decisions on the Digital Marketplace</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developing-the-digital-marketplace/digitalmarketplace-runner.html">Digital Marketplace Runner (‘dmrunner’)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developing-the-digital-marketplace/nix.html">Nix Environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developing-the-digital-marketplace/data-model.html">Data model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developing-the-digital-marketplace/development-and-deployment-process.html">Development and deployment process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developing-the-digital-marketplace/frontend-migration.html">Migrating the Digital Marketplace frontend</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developing-the-digital-marketplace/moving-data.html">Moving data between environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developing-the-digital-marketplace/urls.html">URLs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developing-the-digital-marketplace/users.html">Users</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developing-the-digital-marketplace/google-analytics.html">Google Analytics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developing-the-digital-marketplace/load-testing.html">Load testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developing-the-digital-marketplace/automated-testing.html">Automated testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developing-the-digital-marketplace/splitting-applications.html">Splitting or adding a frontend application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developing-the-digital-marketplace/database-migrations.html">Database migrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developing-the-digital-marketplace/docker-strategies.html">Docker strategies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developing-the-digital-marketplace/frontend-assets-and-tools.html">Frontend assets and tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developing-the-digital-marketplace/python-typing-strategy.html">Python typing strategy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developing-the-digital-marketplace/production-guidelines.html">Guidelines for accessing production data and systems</a></li>
</ul>
<p class="caption"><span class="caption-text">Content and frameworks</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../content-and-frameworks/adding-frameworks.html">Preparing to add a new framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../content-and-frameworks/framework-lifecycle-for-developers.html">Framework lifecycle for developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../content-and-frameworks/how-suppliers-apply-to-a-framework.html">How suppliers apply to a framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../content-and-frameworks/framework-agreements.html">Framework agreements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../content-and-frameworks/contract-variations.html">Contract variations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../content-and-frameworks/adding-a-new-form-field-type.html">Adding a new form field type</a></li>
<li class="toctree-l1"><a class="reference internal" href="../content-and-frameworks/finding-content.html">Finding content</a></li>
<li class="toctree-l1"><a class="reference internal" href="../content-and-frameworks/changing-content.html">Changing content</a></li>
<li class="toctree-l1"><a class="reference internal" href="../content-and-frameworks/useful-api-endpoints-for-frameworks.html">Useful API endpoints for frameworks</a></li>
</ul>
<p class="caption"><span class="caption-text">Infrastructure</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../infrastructure/antivirus.html">The Antivirus API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../infrastructure/aws-accounts.html">AWS accounts and access</a></li>
<li class="toctree-l1"><a class="reference internal" href="../infrastructure/aws-resources.html">AWS Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../infrastructure/code-backups.html">Code backups</a></li>
<li class="toctree-l1"><a class="reference internal" href="../infrastructure/database-backups.html">Database backups</a></li>
<li class="toctree-l1"><a class="reference internal" href="../infrastructure/domains.html">Domains</a></li>
<li class="toctree-l1"><a class="reference internal" href="../infrastructure/emails.html">Email integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../infrastructure/elasticsearch.html">Elasticsearch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../infrastructure/jenkins.html">Jenkins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../infrastructure/github-actions.html">GitHub Actions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../infrastructure/logging.html">Logging, monitoring and alerting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../infrastructure/maintenance-mode.html">Maintenance Mode</a></li>
<li class="toctree-l1"><a class="reference internal" href="../infrastructure/python-environments.html">Python environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../infrastructure/paas.html">What is PaaS?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../infrastructure/paas.html#deploying-digital-marketplace-apps-to-gov-uk-paas">Deploying Digital Marketplace apps to GOV.UK PaaS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../infrastructure/rate-limiting.html">Rate Limiting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../infrastructure/upgrading-backend-services.html">Upgrading backend services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../infrastructure/session-management.html">Session Management</a></li>
</ul>
<p class="caption"><span class="caption-text">Managing People and Secret Things</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="credentials.html">Credentials and secrets</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Adding and removing access for new starters / leavers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#github">Github</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#admins">Admins</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#aws">AWS</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">Admins</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#credentials">Credentials</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id2">Admins</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#docker-hub">Docker Hub</a></li>
<li class="toctree-l2"><a class="reference internal" href="#jenkins">Jenkins</a></li>
<li class="toctree-l2"><a class="reference internal" href="#gov-uk-paas">GOV.UK PaaS</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id3">Admins</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#gov-uk-notify">GOV.UK Notify</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id4">Admins</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#mailchimp">Mailchimp</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id5">Admins</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#logit">Logit</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id6">Admins</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#api-tokens-and-other-shared-credentials">API tokens and other shared credentials</a></li>
<li class="toctree-l2"><a class="reference internal" href="#snyk">Snyk</a></li>
<li class="toctree-l2"><a class="reference internal" href="#cloud-security-watch">Cloud Security Watch</a></li>
<li class="toctree-l2"><a class="reference internal" href="#digital-marketplace-administrators">Digital Marketplace administrators</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id8">Leavers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="production-access.html">Requirements for access to production environments</a></li>
</ul>
<p class="caption"><span class="caption-text">2nd Line Runbook</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../2nd-line-runbook/incidents.html">Incidents</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2nd-line-runbook/logging-in-to-paas-databases.html">Logging in to databases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2nd-line-runbook/logging-in-to-paas-databases.html#resetting-brief-data-with-conduit">Resetting brief data with conduit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2nd-line-runbook/blocking-ips.html">IP Restrictions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2nd-line-runbook/upgrading-jenkins.html">Upgrading Jenkins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2nd-line-runbook/rebuilding-jenkins.html">Rebuilding Jenkins from scratch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2nd-line-runbook/rotate-keys.html">Rotating API keys</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2nd-line-runbook/debugging-paas-app-instances.html">Debugging PaaS App Instances</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2nd-line-runbook/vulnerability-scanning.html">Vulnerability scanning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2nd-line-runbook/novations.html">Novations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2nd-line-runbook/support-tasks.html">Support Tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2nd-line-runbook/investigating-alerts.html">Responding to Cloudwatch alerts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2nd-line-runbook/buyer-domain-allow-list.html">Buyer Domain Allow List</a></li>
</ul>
<p class="caption"><span class="caption-text">What is this?</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/alphagov/digitalmarketplace-manual/blob/master/README.md">README</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">digitalmarketplace-manual</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Adding and removing access for new starters / leavers</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/Crown-Commercial-Service/digitalmarketplace-manual/blob/main/manual/managing-people-and-secret-things/accounts.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="adding-and-removing-access-for-new-starters-leavers">
<span id="accounts"></span><h1><a class="toc-backref" href="#id9">Adding and removing access for new starters / leavers</a><a class="headerlink" href="#adding-and-removing-access-for-new-starters-leavers" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#adding-and-removing-access-for-new-starters-leavers" id="id9">Adding and removing access for new starters / leavers</a></p>
<ul>
<li><p><a class="reference internal" href="#github" id="id10">Github</a></p>
<ul>
<li><p><a class="reference internal" href="#admins" id="id11">Admins</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#aws" id="id12">AWS</a></p>
<ul>
<li><p><a class="reference internal" href="#id1" id="id13">Admins</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#credentials" id="id14">Credentials</a></p>
<ul>
<li><p><a class="reference internal" href="#id2" id="id15">Admins</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#docker-hub" id="id16">Docker Hub</a></p></li>
<li><p><a class="reference internal" href="#jenkins" id="id17">Jenkins</a></p></li>
<li><p><a class="reference internal" href="#gov-uk-paas" id="id18">GOV.UK PaaS</a></p>
<ul>
<li><p><a class="reference internal" href="#id3" id="id19">Admins</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#gov-uk-notify" id="id20">GOV.UK Notify</a></p>
<ul>
<li><p><a class="reference internal" href="#id4" id="id21">Admins</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#mailchimp" id="id22">Mailchimp</a></p>
<ul>
<li><p><a class="reference internal" href="#id5" id="id23">Admins</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#logit" id="id24">Logit</a></p>
<ul>
<li><p><a class="reference internal" href="#id6" id="id25">Admins</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#api-tokens-and-other-shared-credentials" id="id26">API tokens and other shared credentials</a></p></li>
<li><p><a class="reference internal" href="#snyk" id="id27">Snyk</a></p></li>
<li><p><a class="reference internal" href="#cloud-security-watch" id="id28">Cloud Security Watch</a></p></li>
<li><p><a class="reference internal" href="#digital-marketplace-administrators" id="id29">Digital Marketplace administrators</a></p></li>
<li><p><a class="reference internal" href="#id8" id="id30">Leavers</a></p></li>
</ul>
</li>
</ul>
</div>
<p><strong>Apart from Github team membership, access to the following things should only
be given after a new developer has met the</strong> <a class="reference internal" href="production-access.html#production-access"><span class="std std-ref">Requirements for access to production environments</span></a>.</p>
<p>Many of these steps involve scripts that need to know where you’ve checked out the
<a class="reference external" href="https://github.com/alphagov/digitalmarketplace-credentials">credentials repository</a>. Either preface each command with
<code class="docutils literal notranslate"><span class="pre">DM_CREDENTIALS_REPO=&lt;path-to-checkout&gt;</span></code>, or
<code class="docutils literal notranslate"><span class="pre">export</span></code> that variable before you start.</p>
<p>For starters and leavers clone the relevant tickets with the checklist in the 2nd line trello board
(<a class="reference external" href="https://trello.com/c/MUyEfCth">starters</a> and <a class="reference external" href="https://trello.com/c/mCEiiYrS">leavers</a>).</p>
<div class="section" id="github">
<h2><a class="reference external" href="https://github.com">Github</a><a class="headerlink" href="#github" title="Permalink to this headline">¶</a></h2>
<p>There are two main teams in the <a class="reference external" href="https://github.com/alphagov">alphagov Github organization</a>:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">digitalmarketplace</span></code></dt><dd><p>Gives admin access to most digitalmarketplace repositories. Can be given to developers and other team members who need to view/change code (e.g. content designers).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">digitalmarketplace-admin</span></code></dt><dd><p>Gives access to the private digitalmarketplace-credentials repository. Only for developers who’ve met the <a class="reference internal" href="production-access.html#production-access"><span class="std std-ref">Requirements for access to production environments</span></a>.</p>
</dd>
</dl>
<div class="section" id="admins">
<h3><a class="toc-backref" href="#id11">Admins</a><a class="headerlink" href="#admins" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/orgs/alphagov/people?utf8=%E2%9C%93&amp;query=%20role%3Aowner">Github organization owners</a> can
invite people to the organization and manage team membership</p></li>
<li><p><a class="reference external" href="https://github.com/orgs/alphagov/teams/digitalmarketplace/members?utf8=%E2%9C%93&amp;query=%20role%3Amaintainer">Team maintainers</a>
can invite organization owners to the team</p></li>
<li><p>To request alphagov organization owner role you could send an email to gds-github-owners&#64; Google group.</p></li>
</ul>
</div>
</div>
<div class="section" id="aws">
<span id="managing-aws-accounts"></span><h2><a class="reference external" href="http://console.aws.amazon.com">AWS</a><a class="headerlink" href="#aws" title="Permalink to this headline">¶</a></h2>
<p>AWS accounts are currently used for access to encrypted credentials, accessing CloudWatch logs, S3 (the storage backend)
and for managing our Jenkins (CI) box.</p>
<p>Available accounts, roles and the how developers should get themselves set up, are described in <a class="reference internal" href="../infrastructure/aws-accounts.html#aws-accounts"><span class="std std-ref">AWS accounts and access</span></a>.</p>
<p>Users are managed using our
<a class="reference external" href="https://github.com/alphagov/digitalmarketplace-aws/tree/master/terraform/modules/iam-users">iam-users Terraform module</a>.</p>
<p>To add or remove a user to AWS, start from the
<a class="reference external" href="https://github.com/alphagov/digitalmarketplace-aws">digitalmarketplace-aws</a> repo. Note that there is an additional
<a class="reference external" href="https://github.com/alphagov/digitalmarketplace-aws/blob/master/terraform/README.md">README file</a> relating to
working with Terraform.</p>
<ul class="simple">
<li><p>Edit the <code class="docutils literal notranslate"><span class="pre">terraform/modules/iam-users/users/main.tf</span></code> file;</p></li>
<li><p>In the <a class="reference external" href="https://github.com/alphagov/digitalmarketplace-credentials">digitalmarketplace-credentials</a> repo add new
users to the correct roles in <code class="docutils literal notranslate"><span class="pre">terraform/accounts/main.tfvars</span></code> using
<a class="reference external" href="https://github.com/alphagov/digitalmarketplace-credentials#set-up-aws-credentials-for-sops">sops-wrapper</a></p>
<ul>
<li><p>instructions in <a class="reference external" href="https://github.com/alphagov/digitalmarketplace-credentials">digitalmarketplace-credentials</a></p></li>
</ul>
</li>
<li><p>Back in the <a class="reference external" href="https://github.com/alphagov/digitalmarketplace-aws">digitalmarketplace-aws</a> repo, go to
<code class="docutils literal notranslate"><span class="pre">terraform/accounts/main</span></code> and run <code class="docutils literal notranslate"><span class="pre">AWS_PROFILE=main-infrastructure</span> <span class="pre">make</span> <span class="pre">plan</span></code></p>
<ul>
<li><p>make sure the changes Terraform will make are sane and represent only your intended alterations</p></li>
<li><p>if not - are your branches up-to-date with master?</p></li>
</ul>
</li>
<li><p>Have PRs approved on the <a class="reference external" href="https://github.com/alphagov/digitalmarketplace-aws">digitalmarketplace-aws</a> and the
<a class="reference external" href="https://github.com/alphagov/digitalmarketplace-credentials">digitalmarketplace-credentials</a> repo’s.</p></li>
<li><p>Again from <code class="docutils literal notranslate"><span class="pre">digitalmarketplace-aws/terraform/accounts/main</span></code> run <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">apply</span></code>.</p></li>
</ul>
<p>When adding a user, you should now go to the users list in the IAM service, and give them a temporary password so that
they can log in to the AWS Console.</p>
<ul class="simple">
<li><p>The user must then log in, change their password, and set up their 2FA device - see <a class="reference internal" href="../infrastructure/aws-accounts.html#aws-accounts"><span class="std std-ref">AWS accounts and access</span></a>.</p></li>
</ul>
<div class="section" id="id1">
<h3><a class="toc-backref" href="#id13">Admins</a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>Users with admin access to the main <strong>digitalmarketplace</strong> account have permissions to run
<code class="docutils literal notranslate"><span class="pre">terraform</span> <span class="pre">apply</span></code> to create or remove user accounts and modify access roles. They’re listed
in the <code class="docutils literal notranslate"><span class="pre">digitalmarketplace-credentials/terraform/accounts/main.json</span></code> file under the <code class="docutils literal notranslate"><span class="pre">admins</span></code> key.</p>
</div>
</div>
<div class="section" id="credentials">
<h2><a class="reference external" href="https://github.com/alphagov/digitalmarketplace-credentials">Credentials</a><a class="headerlink" href="#credentials" title="Permalink to this headline">¶</a></h2>
<p>Access to the credentials requires access to the repo (either by being a member of the
digitalmarketplace-admin Github team or an owner of the alphagov Github organization)
and an AWS account with a developer or an admin role.</p>
<p>Removing AWS user account or permissions disables the ability to decrypt the credentials.</p>
<div class="section" id="id2">
<h3><a class="toc-backref" href="#id15">Admins</a><a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>Github.com and AWS admins.</p>
</div>
</div>
<div class="section" id="docker-hub">
<h2><a class="reference external" href="https://hub.docker.com/u/digitalmarketplace/dashboard">Docker Hub</a><a class="headerlink" href="#docker-hub" title="Permalink to this headline">¶</a></h2>
<p>Users should sign up for their own account with their work email address. Users can then be invited to the
<a class="reference external" href="https://hub.docker.com/u/digitalmarketplace/dashboard/">“digitalmarketplace” organisation</a>.</p>
</div>
<div class="section" id="jenkins">
<span id="jenkins-accounts"></span><h2><a class="reference external" href="https://ci.marketplace.team">Jenkins</a><a class="headerlink" href="#jenkins" title="Permalink to this headline">¶</a></h2>
<p>Add or remove users from the list of Jenkins users in <a class="reference external" href="https://github.com/alphagov/digitalmarketplace-credentials/blob/master/jenkins-vars/jenkins.yaml">jenkins-vars/jenkins.yaml</a> in the credentials
repo.</p>
<p>Then, from a checkout of the latest (main) <a class="reference external" href="https://github.com/alphagov/digitalmarketplace-jenkins/">Jenkins repo</a>, apply the change with:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">keys</span></code></p></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><p>This will <a class="reference external" href="https://github.com/alphagov/digitalmarketplace-jenkins/blob/main/playbooks/roles/jenkins/tasks/01_keys.yml">allow the new user SSH access</a>
by adding their Github public key to the jenkins <code class="docutils literal notranslate"><span class="pre">authorized_keys</span></code> file.</p></li>
</ul>
</div></blockquote>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">reconfigure</span></code> (restarts Jenkins, notify the team and use shutdown mode like when <a class="reference internal" href="../2nd-line-runbook/upgrading-jenkins.html#upgrading-jenkins"><span class="std std-ref">upgrading jenkins</span></a></p></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><p>This adds the user as a Jenkins administrator by creating an entry in the <a class="reference external" href="https://github.com/alphagov/digitalmarketplace-jenkins/blob/ec0e613088606aab4f5ee7986175d36d8673438d/playbooks/roles/jenkins/templates/jenkins/config.xml.j2#L11">config XML</a> for them.</p></li>
</ul>
</div></blockquote>
<p>Removing the user from the Jenkins users list also removes their SSH key from the list of authorized keys on the Jenkins instance.</p>
</div>
<div class="section" id="gov-uk-paas">
<h2><a class="reference external" href="https://login.cloud.service.gov.uk/login">GOV.UK PaaS</a><a class="headerlink" href="#gov-uk-paas" title="Permalink to this headline">¶</a></h2>
<dl class="simple">
<dt>Users can be invited to the <cite>digitalmarketplace</cite> PaaS organisation by an OrgManager,</dt><dd><p>from the <a class="reference external" href="https://login.cloud.service.gov.uk/login">PaaS admin tool</a>. Users can also be removed in the admin.</p>
</dd>
</dl>
<p>All security-cleared developers should be added to the <code class="docutils literal notranslate"><span class="pre">preview</span></code> and <code class="docutils literal notranslate"><span class="pre">monitoring</span></code> spaces; we add and
remove developers from the <code class="docutils literal notranslate"><span class="pre">staging</span></code> and <code class="docutils literal notranslate"><span class="pre">production</span></code> spaces as required (e.g. when transitioning on or off
2nd-line support).</p>
<p>They can be added/removed from a role as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cf</span> <span class="nb">set</span><span class="o">-</span><span class="n">space</span><span class="o">-</span><span class="n">role</span> <span class="o">&lt;</span><span class="n">user</span><span class="o">-</span><span class="n">email</span><span class="o">&gt;</span> <span class="n">digitalmarketplace</span> <span class="o">&lt;</span><span class="n">space</span><span class="o">&gt;</span> <span class="n">SpaceDeveloper</span>
<span class="n">cf</span> <span class="n">unset</span><span class="o">-</span><span class="n">space</span><span class="o">-</span><span class="n">role</span> <span class="o">&lt;</span><span class="n">user</span><span class="o">-</span><span class="n">email</span><span class="o">&gt;</span> <span class="n">digitalmarketplace</span> <span class="o">&lt;</span><span class="n">space</span><span class="o">&gt;</span> <span class="n">SpaceDeveloper</span>
</pre></div>
</div>
<div class="section" id="id3">
<h3><a class="toc-backref" href="#id19">Admins</a><a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>PaaS users with OrgManager role for the <cite>digitalmarketplace</cite> organisation.</p>
</div>
</div>
<div class="section" id="gov-uk-notify">
<h2><a class="reference external" href="https://www.notifications.service.gov.uk">GOV.UK Notify</a><a class="headerlink" href="#gov-uk-notify" title="Permalink to this headline">¶</a></h2>
<p>Users should sign up for their own account with their work email address. Users can then be invited to the “Digital
Marketplace” service team members.</p>
<div class="section" id="id4">
<h3><a class="toc-backref" href="#id21">Admins</a><a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p>GOV.UK Notify “Digital Marketplace” service team members with “Modify this service and its team” permissions.</p>
</div>
</div>
<div class="section" id="mailchimp">
<h2><a class="reference external" href="https://us5.admin.mailchimp.com/account/users/">Mailchimp</a><a class="headerlink" href="#mailchimp" title="Permalink to this headline">¶</a></h2>
<p>Users should sign up for their own account with their work email address. Users can be invited to the “Government
Digital Service” Mailchimp account. Users will need to set up two-factor authentication to access Mailchimp.</p>
<p>There is a shared developer Mailchimp account for the creation of API keys (see <cite>logins.enc</cite> in the credentials repo).</p>
<div class="section" id="id5">
<h3><a class="toc-backref" href="#id23">Admins</a><a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<p>Admins users in the Mailchimp account.</p>
<p>If a developer is leaving the team and has a Mailchimp API key linked to their account, ensure a replacement API key
has been created using the DM developer account (and is stored in the credentials repo) <strong>before</strong> removing the user, as
any API keys linked to that user’s account will be removed as well.</p>
</div>
</div>
<div class="section" id="logit">
<h2><a class="reference external" href="https://auth.logit.io/login">Logit</a><a class="headerlink" href="#logit" title="Permalink to this headline">¶</a></h2>
<p>You can log in to Logit using Google SAML from the Google Apps menu. “Digital Marketplace” team on the GDS Logit account
is used to manage access to our preview, staging and production stacks.</p>
<div class="section" id="id6">
<h3><a class="toc-backref" href="#id25">Admins</a><a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<p>Logit users with the Administrator role.</p>
</div>
</div>
<div class="section" id="api-tokens-and-other-shared-credentials">
<h2><a class="toc-backref" href="#id26">API tokens and other shared credentials</a><a class="headerlink" href="#api-tokens-and-other-shared-credentials" title="Permalink to this headline">¶</a></h2>
<p>Once access to AWS, credentials and Jenkins are removed shared credentials in credentials repository can be recycled.
Main things that need to be renewed:</p>
<ul class="simple">
<li><p>Production tokens for API and search API (require Infrastructure update and re-releasing all apps). Follow the
instructions for <a class="reference external" href="https://alphagov.github.io/digitalmarketplace-manual/2nd-line-runbook/rotate-keys.html?highlight=rotate#rotating-data-api-and-search-api-keys">rotating API keys</a>.</p></li>
<li><p>Any Digital Marketplace production admin accounts that the user had access to should be either disabled or have their
passwords changed (see below)</p></li>
<li><p>Passwords for user accounts used in the smoke and smoulder tests (use the <code class="docutils literal notranslate"><span class="pre">Rotate</span> <span class="pre">functional</span> <span class="pre">test</span> <span class="pre">account</span> <span class="pre">passwords</span></code>
Jenkins job)</p></li>
<li><p>Shared logins for other tools such as npmjs.com, found in the <code class="docutils literal notranslate"><span class="pre">digitalmarketplace-credentials/pass</span></code> folder.</p></li>
</ul>
</div>
<div class="section" id="snyk">
<h2><a class="reference external" href="https://app.snyk.io/org/digital-marketplace/projects">Snyk</a><a class="headerlink" href="#snyk" title="Permalink to this headline">¶</a></h2>
<p>We use Snyk to monitor vulnerabilities in our dependencies, via email alerts and pre-merge checks of any new
dependencies brought in via a pull request. See <a class="reference internal" href="../2nd-line-runbook/vulnerability-scanning.html#vulnerability-scanning"><span class="std std-ref">Vulnerability scanning</span></a> for details.</p>
<p>Developers can be invited to/removed from Snyk via the ‘Members’ tab of the Digital Marketplace organisation settings.
The developer can then log in using their Google account, and select the ‘Digital Marketplace’ organisation from the top
drop down box to view the status for each app.</p>
</div>
<div class="section" id="cloud-security-watch">
<span id="id7"></span><h2><a class="reference external" href="https://9dn8joxof3.execute-api.eu-west-1.amazonaws.com/app/team/5/status">Cloud Security Watch</a><a class="headerlink" href="#cloud-security-watch" title="Permalink to this headline">¶</a></h2>
<p>Cloud Security Watch (CSW) is a tool developed by the Cyber Security team, which carries out daily audits on our AWS
accounts and flags up any vulnerabilities to their configuration.</p>
<p>For a developer to gain access to its <a class="reference external" href="https://9dn8joxof3.execute-api.eu-west-1.amazonaws.com/app/team/5/status">web interface</a>,
they will need to submit their GDS email address to the Cyber Security team’s Slack channel, <code class="docutils literal notranslate"><span class="pre">#cyber-security-help</span></code>.</p>
</div>
<div class="section" id="digital-marketplace-administrators">
<span id="managing-admin-accounts"></span><h2><a class="reference external" href="https://www.digitalmarketplace.service.gov.uk/cookies">Digital Marketplace administrators</a><a class="headerlink" href="#digital-marketplace-administrators" title="Permalink to this headline">¶</a></h2>
<p>Accounts to access the Digital Marketplace admin app can be managed by logging in to the Digital Marketplace with an
account with the “admin-manager” role.</p>
<p>Our production “admin-manager” user credentials are stored in <code class="docutils literal notranslate"><span class="pre">digitalmarketplace-credentials/pass</span></code> folder. This
account can be used to invite new admin users and deactivate or change the permissions for existing admin users.</p>
</div>
<div class="section" id="id8">
<h2><a class="toc-backref" href="#id30">Leavers</a><a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h2>
<p>We have a template Trello ticket to help with removing leavers <a class="reference external" href="https://trello.com/c/mCEiiYrS/898-remove-leaving-developers-from-all-the-things-%F0%9F%91%8B">here</a>.</p>
<p>As well as using the trello ticket to remove individual accounts from all of the above services, there should be a GDS Helpdesk ticket
to revoke GDS credentials (Google Apps account and email address etc).</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="production-access.html" class="btn btn-neutral float-right" title="Requirements for access to production environments" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="credentials.html" class="btn btn-neutral float-left" title="Credentials and secrets" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2013 - 2021 Digital Marketplace

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>