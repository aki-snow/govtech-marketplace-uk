function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define("GOVUKFrontend",["exports"],e):e(t.GOVUKFrontend={})}(this,function(t){"use strict";function s(t,e){if(window.NodeList.prototype.forEach)return t.forEach(e);for(var o=0;o<t.length;o++)e.call(window,t[o],o,t)}function o(t){this.$module=t,this.moduleId=t.getAttribute("id"),this.$sections=t.querySelectorAll(".govuk-accordion__section"),this.$openAllButton="",this.browserSupportsSessionStorage=e.checkForSessionStorage(),this.controlsClass="govuk-accordion__controls",this.openAllClass="govuk-accordion__open-all",this.iconClass="govuk-accordion__icon",this.sectionHeaderClass="govuk-accordion__section-header",this.sectionHeaderFocusedClass="govuk-accordion__section-header--focused",this.sectionHeadingClass="govuk-accordion__section-heading",this.sectionSummaryClass="govuk-accordion__section-summary",this.sectionButtonClass="govuk-accordion__section-button",this.sectionExpandedClass="govuk-accordion__section--expanded"}(function(t){var a,l,c,u;"defineProperty"in Object&&function(){try{return Object.defineProperty({},"test",{value:42}),!0}catch(t){return!1}}()||(a=Object.defineProperty,l=Object.prototype.hasOwnProperty("__defineGetter__"),c="Getters & setters cannot be defined on this javascript engine",u="A property cannot both have accessors and be writable or have a value",Object.defineProperty=function(t,e,o){if(a&&(t===window||t===document||t===Element.prototype||t instanceof Element))return a(t,e,o);if(null===t||!(t instanceof Object||"object"==typeof t))throw new TypeError("Object.defineProperty called on non-object");if(!(o instanceof Object))throw new TypeError("Property description must be an object");var n=String(e),i="value"in o||"writable"in o,s="get"in o&&typeof o.get,r="set"in o&&typeof o.set;if(s){if("function"!==s)throw new TypeError("Getter must be a function");if(!l)throw new TypeError(c);if(i)throw new TypeError(u);Object.__defineGetter__.call(t,n,o.get)}else t[n]=o.value;if(r){if("function"!==r)throw new TypeError("Setter must be a function");if(!l)throw new TypeError(c);if(i)throw new TypeError(u);Object.__defineSetter__.call(t,n,o.set)}return"value"in o&&(t[n]=o.value),t})}).call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof global&&global||{}),function(t){"bind"in Function.prototype||Object.defineProperty(Function.prototype,"bind",{value:function(e){function t(){}var o,n=Array,i=Object,s=i.prototype,r=n.prototype,a=s.toString,l="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,c=Function.prototype.toString;o=function(t){if("function"!=typeof t)return!1;if(l)return function(t){try{return c.call(t),!0}catch(t){return!1}}(t);var e=a.call(t);return"[object Function]"===e||"[object GeneratorFunction]"===e};var u=r.slice,d=r.concat,h=r.push,p=Math.max,m=this;if(!o(m))throw new TypeError("Function.prototype.bind called on incompatible "+m);for(var f,y=u.call(arguments,1),b=p(0,m.length-y.length),v=[],g=0;g<b;g++)h.call(v,"$"+g);return f=Function("binder","return function ("+v.join(",")+"){ return binder.apply(this, arguments); }")(function(){if(this instanceof f){var t=m.apply(this,d.call(y,u.call(arguments)));return i(t)===t?t:this}return m.apply(e,d.call(y,u.call(arguments)))}),m.prototype&&(t.prototype=m.prototype,f.prototype=new t,t.prototype=null),f}})}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof global&&global||{}),function(h){var t,e,o;"DOMTokenList"in this&&(!("classList"in(t=document.createElement("x")))||!t.classList.toggle("x",!1)&&!t.className)||("DOMTokenList"in(e=this)&&e.DOMTokenList&&(!document.createElementNS||!document.createElementNS("http://www.w3.org/2000/svg","svg")||document.createElementNS("http://www.w3.org/2000/svg","svg").classList instanceof DOMTokenList)||(e.DOMTokenList=function(){function o(t,e,o,n){Object.defineProperty?Object.defineProperty(t,e,{configurable:!1===i||!!n,get:o}):t.__defineGetter__(e,o)}var i=!0;try{o({},"support")}catch(t){i=!1}return function(i,s){function t(t){o(a,t,function(){return d(),l[t]},!1)}function r(){if(e<=u)for(;e<u;++e)t(e)}var a=this,l=[],c={},u=0,e=0,d=function(){var t,e,o=arguments,n=/\s+/;if(o.length)for(e=0;e<o.length;++e)if(n.test(o[e]))throw(t=new SyntaxError('String "'+o[e]+'" contains an invalid character')).code=5,t.name="InvalidCharacterError",t;for(""===(l="object"==typeof i[s]?(""+i[s].baseVal).replace(/^\s+|\s+$/g,"").split(n):(""+i[s]).replace(/^\s+|\s+$/g,"").split(n))[0]&&(l=[]),c={},e=0;e<l.length;++e)c[l[e]]=!0;u=l.length,r()};return d(),o(a,"length",function(){return d(),u}),a.toLocaleString=a.toString=function(){return d(),l.join(" ")},a.item=function(t){return d(),l[t]},a.contains=function(t){return d(),!!c[t]},a.add=function(){d.apply(a,t=arguments);for(var t,e,o=0,n=t.length;o<n;++o)c[e=t[o]]||(l.push(e),c[e]=!0);u!==l.length&&(u=l.length>>>0,"object"==typeof i[s]?i[s].baseVal=l.join(" "):i[s]=l.join(" "),r())},a.remove=function(){d.apply(a,t=arguments);for(var t,e={},o=0,n=[];o<t.length;++o)e[t[o]]=!0,delete c[t[o]];for(o=0;o<l.length;++o)e[l[o]]||n.push(l[o]);u=(l=n).length>>>0,"object"==typeof i[s]?i[s].baseVal=l.join(" "):i[s]=l.join(" "),r()},a.toggle=function(t,e){return d.apply(a,[t]),h!==e?e?(a.add(t),!0):(a.remove(t),!1):c[t]?(a.remove(t),!1):(a.add(t),!0)},a}}()),"classList"in(o=document.createElement("span"))&&(o.classList.toggle("x",!1),o.classList.contains("x")&&(o.classList.constructor.prototype.toggle=function(t,e){var o=e;if(o!==h)return this[(o=!!o)?"add":"remove"](t),o;var n=!this.contains(t);return this[n?"add":"remove"](t),n})),function(){var t=document.createElement("span");if("classList"in t&&(t.classList.add("a","b"),!t.classList.contains("b"))){var n=t.classList.constructor.prototype.add;t.classList.constructor.prototype.add=function(){for(var t=arguments,e=arguments.length,o=0;o<e;o++)n.call(this,t[o])}}}(),function(){var t=document.createElement("span");if("classList"in t&&(t.classList.add("a"),t.classList.add("b"),t.classList.remove("a","b"),t.classList.contains("b"))){var n=t.classList.constructor.prototype.remove;t.classList.constructor.prototype.remove=function(){for(var t=arguments,e=arguments.length,o=0;o<e;o++)n.call(this,t[o])}}}())}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof global&&global||{}),function(t){"Document"in this||"undefined"==typeof WorkerGlobalScope&&"function"!=typeof importScripts&&(this.HTMLDocument?this.Document=this.HTMLDocument:(this.Document=this.HTMLDocument=document.constructor=new Function("return function Document() {}")(),this.Document.prototype=document))}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof global&&global||{}),function(t){"Element"in this&&"HTMLElement"in this||function(){if(!window.Element||window.HTMLElement){window.Element=window.HTMLElement=new Function("return function Element() {}")();var t,e=document.appendChild(document.createElement("body")),o=e.appendChild(document.createElement("iframe")).contentWindow.document,a=Element.prototype=o.appendChild(o.createElement("*")),l={},c=function(t,e){var o,n,i,s=t.childNodes||[],r=-1;if(1===t.nodeType&&t.constructor!==Element)for(o in t.constructor=Element,l)n=l[o],t[o]=n;for(;i=e&&s[++r];)c(i,e);return t},u=document.getElementsByTagName("*"),n=document.createElement,i=100;a.attachEvent("onpropertychange",function(t){for(var e,o=t.propertyName,n=!l.hasOwnProperty(o),i=a[o],s=l[o],r=-1;e=u[++r];)1===e.nodeType&&(!n&&e[o]!==s||(e[o]=i));l[o]=i}),a.constructor=Element,a.hasAttribute||(a.hasAttribute=function(t){return null!==this.getAttribute(t)}),s()||(document.onreadystatechange=s,t=setInterval(s,25)),document.createElement=function(t){var e=n(String(t).toLowerCase());return c(e)},document.removeChild(e)}else window.HTMLElement=window.Element;function s(){return i--||clearTimeout(t),!(!document.body||document.body.prototype||!/(complete|interactive)/.test(document.readyState))&&(c(document,!0),t&&document.body.prototype&&clearTimeout(t),!!document.body.prototype)}}()}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof global&&global||{}),function(t){var e;"document"in this&&"classList"in document.documentElement&&"Element"in this&&"classList"in Element.prototype&&((e=document.createElement("span")).classList.add("a","b"),e.classList.contains("b"))||function(t){function u(t,e,o,n){Object.defineProperty?Object.defineProperty(t,e,{configurable:!1===d||!!n,get:o}):t.__defineGetter__(e,o)}var d=!0;try{u({},"support")}catch(t){d=!1}var h=function(t,l,c){u(t.prototype,l,function(){var t,e=this,o="__defineGetter__DEFINE_PROPERTY"+l;if(e[o])return t;if(!(e[o]=!0)===d){for(var n,i=h.mirror||document.createElement("div"),s=i.childNodes,r=s.length,a=0;a<r;++a)if(s[a]._R===e){n=s[a];break}n=n||i.appendChild(document.createElement("div")),t=DOMTokenList.call(n,e,c)}else t=new DOMTokenList(e,c);return u(e,l,function(){return t}),delete e[o],t},!0)};h(t.Element,"classList","className"),h(t.HTMLElement,"classList","className"),h(t.HTMLLinkElement,"relList","rel"),h(t.HTMLAnchorElement,"relList","rel"),h(t.HTMLAreaElement,"relList","rel")}(this)}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof global&&global||{}),o.prototype.init=function(){if(this.$module){this.initControls(),this.initSectionHeaders();var t=this.checkIfAllSectionsOpen();this.updateOpenAllButton(t)}},o.prototype.initControls=function(){this.$openAllButton=document.createElement("button"),this.$openAllButton.setAttribute("type","button"),this.$openAllButton.innerHTML='Open all <span class="govuk-visually-hidden">sections</span>',this.$openAllButton.setAttribute("class",this.openAllClass),this.$openAllButton.setAttribute("aria-expanded","false"),this.$openAllButton.setAttribute("type","button");var t=document.createElement("div");t.setAttribute("class",this.controlsClass),t.appendChild(this.$openAllButton),this.$module.insertBefore(t,this.$module.firstChild),this.$openAllButton.addEventListener("click",this.onOpenOrCloseAllToggle.bind(this))},o.prototype.initSectionHeaders=function(){s(this.$sections,function(t,e){var o=t.querySelector("."+this.sectionHeaderClass);this.initHeaderAttributes(o,e),this.setExpanded(this.isExpanded(t),t),o.addEventListener("click",this.onSectionToggle.bind(this,t)),this.setInitialState(t)}.bind(this))},o.prototype.initHeaderAttributes=function(e,t){var o=this,n=e.querySelector("."+this.sectionButtonClass),i=e.querySelector("."+this.sectionHeadingClass),s=e.querySelector("."+this.sectionSummaryClass),r=document.createElement("button");r.setAttribute("type","button"),r.setAttribute("id",this.moduleId+"-heading-"+(t+1)),r.setAttribute("aria-controls",this.moduleId+"-content-"+(t+1));for(var a=0;a<n.attributes.length;a++){var l=n.attributes.item(a);r.setAttribute(l.nodeName,l.nodeValue)}r.addEventListener("focusin",function(t){e.classList.contains(o.sectionHeaderFocusedClass)||(e.className+=" "+o.sectionHeaderFocusedClass)}),r.addEventListener("blur",function(t){e.classList.remove(o.sectionHeaderFocusedClass)}),null!=s&&r.setAttribute("aria-describedby",this.moduleId+"-summary-"+(t+1)),r.innerHTML=n.innerHTML,i.removeChild(n),i.appendChild(r);var c=document.createElement("span");c.className=this.iconClass,c.setAttribute("aria-hidden","true"),r.appendChild(c)},o.prototype.onSectionToggle=function(t){var e=this.isExpanded(t);this.setExpanded(!e,t),this.storeState(t)},o.prototype.onOpenOrCloseAllToggle=function(){var e=this,t=this.$sections,o=!this.checkIfAllSectionsOpen();s(t,function(t){e.setExpanded(o,t),e.storeState(t)}),e.updateOpenAllButton(o)},o.prototype.setExpanded=function(t,e){e.querySelector("."+this.sectionButtonClass).setAttribute("aria-expanded",t),t?e.classList.add(this.sectionExpandedClass):e.classList.remove(this.sectionExpandedClass);var o=this.checkIfAllSectionsOpen();this.updateOpenAllButton(o)},o.prototype.isExpanded=function(t){return t.classList.contains(this.sectionExpandedClass)},o.prototype.checkIfAllSectionsOpen=function(){return this.$sections.length===this.$module.querySelectorAll("."+this.sectionExpandedClass).length},o.prototype.updateOpenAllButton=function(t){var e=t?"Close all":"Open all";e+='<span class="govuk-visually-hidden"> sections</span>',this.$openAllButton.setAttribute("aria-expanded",t),this.$openAllButton.innerHTML=e};var e={checkForSessionStorage:function(){var t,e="this is the test string";try{return window.sessionStorage.setItem(e,e),t=window.sessionStorage.getItem(e)===e.toString(),window.sessionStorage.removeItem(e),t}catch(t){"undefined"!=typeof console&&void 0!==console.log||console.log("Notice: sessionStorage not available.")}}};o.prototype.storeState=function(t){if(this.browserSupportsSessionStorage){var e=t.querySelector("."+this.sectionButtonClass);if(e){var o=e.getAttribute("aria-controls"),n=e.getAttribute("aria-expanded");void 0!==o||"undefined"!=typeof console&&void 0!==console.log||console.error(new Error("No aria controls present in accordion section heading.")),void 0!==n||"undefined"!=typeof console&&void 0!==console.log||console.error(new Error("No aria expanded present in accordion section heading.")),o&&n&&window.sessionStorage.setItem(o,n)}}},o.prototype.setInitialState=function(t){if(this.browserSupportsSessionStorage){var e=t.querySelector("."+this.sectionButtonClass);if(e){var o=e.getAttribute("aria-controls"),n=o?window.sessionStorage.getItem(o):null;null!==n&&this.setExpanded("true"===n,t)}}},function(t){"Window"in this||"undefined"==typeof WorkerGlobalScope&&"function"!=typeof importScripts&&function(t){t.constructor?t.Window=t.constructor:(t.Window=t.constructor=new Function("return function Window() {}")()).prototype=this}(this)}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof global&&global||{}),function(s){!function(t){if(!("Event"in t))return!1;if("function"==typeof t.Event)return!0;try{return new Event("click"),!0}catch(t){return!1}}(this)&&function(){var i={click:1,dblclick:1,keyup:1,keypress:1,keydown:1,mousedown:1,mouseup:1,mousemove:1,mouseover:1,mouseenter:1,mouseleave:1,mouseout:1,storage:1,storagecommit:1,textinput:1};if("undefined"!=typeof document&&"undefined"!=typeof window){var t=window.Event&&window.Event.prototype||null;window.Event=Window.prototype.Event=function(t,e){if(!t)throw new Error("Not enough arguments");var o;if("createEvent"in document){o=document.createEvent("Event");var n=!(!e||e.bubbles===s)&&e.bubbles,i=!(!e||e.cancelable===s)&&e.cancelable;return o.initEvent(t,n,i),o}return(o=document.createEventObject()).type=t,o.bubbles=!(!e||e.bubbles===s)&&e.bubbles,o.cancelable=!(!e||e.cancelable===s)&&e.cancelable,o},t&&Object.defineProperty(window.Event,"prototype",{configurable:!1,enumerable:!1,writable:!0,value:t}),"createEvent"in document||(window.addEventListener=Window.prototype.addEventListener=Document.prototype.addEventListener=Element.prototype.addEventListener=function(t,e){var r=this,o=t,n=e;if(r===window&&o in i)throw new Error("In IE8 the event: "+o+" is not available on the window object. Please see https://github.com/Financial-Times/polyfill-service/issues/317 for more information.");r._events||(r._events={}),r._events[o]||(r._events[o]=function(t){var e,o=r._events[t.type].list,n=o.slice(),i=-1,s=n.length;for(t.preventDefault=function(){!1!==t.cancelable&&(t.returnValue=!1)},t.stopPropagation=function(){t.cancelBubble=!0},t.stopImmediatePropagation=function(){t.cancelBubble=!0,t.cancelImmediate=!0},t.currentTarget=r,t.relatedTarget=t.fromElement||null,t.target=t.target||t.srcElement||r,t.timeStamp=(new Date).getTime(),t.clientX&&(t.pageX=t.clientX+document.documentElement.scrollLeft,t.pageY=t.clientY+document.documentElement.scrollTop);++i<s&&!t.cancelImmediate;)i in n&&-1!==a(o,e=n[i])&&"function"==typeof e&&e.call(r,t)},r._events[o].list=[],r.attachEvent&&r.attachEvent("on"+o,r._events[o])),r._events[o].list.push(n)},window.removeEventListener=Window.prototype.removeEventListener=Document.prototype.removeEventListener=Element.prototype.removeEventListener=function(t,e){var o,n=this,i=t,s=e;n._events&&n._events[i]&&n._events[i].list&&-1!==(o=a(n._events[i].list,s))&&(n._events[i].list.splice(o,1),n._events[i].list.length||(n.detachEvent&&n.detachEvent("on"+i,n._events[i]),delete n._events[i]))},window.dispatchEvent=Window.prototype.dispatchEvent=Document.prototype.dispatchEvent=Element.prototype.dispatchEvent=function(e){if(!arguments.length)throw new Error("Not enough arguments");if(!e||"string"!=typeof e.type)throw new Error("DOM Events Exception 0");var o=this,n=e.type;try{if(!e.bubbles){e.cancelBubble=!0;var i=function(t){t.cancelBubble=!0,(o||window).detachEvent("on"+n,i)};this.attachEvent("on"+n,i)}this.fireEvent("on"+n,e)}catch(t){for(e.target=o;"_events"in(e.currentTarget=o)&&"function"==typeof o._events[n]&&o._events[n].call(o,e),"function"==typeof o["on"+n]&&o["on"+n].call(o,e),(o=9===o.nodeType?o.parentWindow:o.parentNode)&&!e.cancelBubble;);}return!0},document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&document.dispatchEvent(new Event("DOMContentLoaded",{bubbles:!0}))}))}function a(t,e){for(var o=-1,n=t.length;++o<n;)if(o in t&&t[o]===e)return o;return-1}}()}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof global&&global||{});function n(t){this.$module=t,this.debounceFormSubmitTimer=null}n.prototype.handleKeyDown=function(t){var e=t.target;"button"===e.getAttribute("role")&&32===t.keyCode&&(t.preventDefault(),e.click())},n.prototype.debounce=function(t){if("true"===t.target.getAttribute("data-prevent-double-click"))return this.debounceFormSubmitTimer?(t.preventDefault(),!1):void(this.debounceFormSubmitTimer=setTimeout(function(){this.debounceFormSubmitTimer=null}.bind(this),1e3))},n.prototype.init=function(){this.$module.addEventListener("keydown",this.handleKeyDown),this.$module.addEventListener("click",this.debounce)};function i(t){this.$module=t}function r(t){this.$module=t,this.$textarea=t.querySelector(".govuk-js-character-count"),this.$textarea&&(this.$countMessage=t.querySelector('[id="'+this.$textarea.id+'-info"]'))}function a(t){this.$module=t,this.$inputs=t.querySelectorAll('input[type="checkbox"]')}function l(t){this.$module=t}function c(t){this.$module=t}function u(t){this.$module=t,this.$menuButton=t&&t.querySelector(".govuk-js-header-toggle"),this.$menu=this.$menuButton&&t.querySelector("#"+this.$menuButton.getAttribute("aria-controls"))}function d(t){this.$module=t,this.$inputs=t.querySelectorAll('input[type="radio"]')}function h(t){this.$module=t,this.$tabs=t.querySelectorAll(".govuk-tabs__tab"),this.keys={left:37,right:39,up:38,down:40},this.jsHiddenClass="govuk-tabs__panel--hidden"}i.prototype.init=function(){this.$module&&("boolean"==typeof this.$module.open||this.polyfillDetails())},i.prototype.polyfillDetails=function(){var t=this.$module,e=this.$summary=t.getElementsByTagName("summary").item(0),o=this.$content=t.getElementsByTagName("div").item(0);e&&o&&(o.id||(o.id="details-content-"+function(){var o=(new Date).getTime();return void 0!==window.performance&&"function"==typeof window.performance.now&&(o+=window.performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=(o+16*Math.random())%16|0;return o=Math.floor(o/16),("x"===t?e:3&e|8).toString(16)})}()),t.setAttribute("role","group"),e.setAttribute("role","button"),e.setAttribute("aria-controls",o.id),!(e.tabIndex=0)==(null!==t.getAttribute("open"))?(e.setAttribute("aria-expanded","true"),o.setAttribute("aria-hidden","false")):(e.setAttribute("aria-expanded","false"),o.setAttribute("aria-hidden","true"),o.style.display="none"),this.polyfillHandleInputs(e,this.polyfillSetAttributes.bind(this)))},i.prototype.polyfillSetAttributes=function(){var t=this.$module,e=this.$summary,o=this.$content,n="true"===e.getAttribute("aria-expanded"),i="true"===o.getAttribute("aria-hidden");return e.setAttribute("aria-expanded",n?"false":"true"),o.setAttribute("aria-hidden",i?"false":"true"),o.style.display=n?"none":"",null!==t.getAttribute("open")?t.removeAttribute("open"):t.setAttribute("open","open"),!0},i.prototype.polyfillHandleInputs=function(t,o){t.addEventListener("keypress",function(t){var e=t.target;13!==t.keyCode&&32!==t.keyCode||"summary"===e.nodeName.toLowerCase()&&(t.preventDefault(),e.click?e.click():o(t))}),t.addEventListener("keyup",function(t){var e=t.target;32===t.keyCode&&"summary"===e.nodeName.toLowerCase()&&t.preventDefault()}),t.addEventListener("click",o)},r.prototype.defaults={characterCountAttribute:"data-maxlength",wordCountAttribute:"data-maxwords"},r.prototype.init=function(){var t=this.$module,e=this.$textarea,o=this.$countMessage;if(e&&o){e.insertAdjacentElement("afterend",o),this.options=this.getDataset(t);var n=this.defaults.characterCountAttribute;this.options.maxwords&&(n=this.defaults.wordCountAttribute),this.maxLength=t.getAttribute(n),this.maxLength&&(t.removeAttribute("maxlength"),"onpageshow"in window?window.addEventListener("pageshow",this.sync.bind(this)):window.addEventListener("DOMContentLoaded",this.sync.bind(this)),this.sync())}},r.prototype.sync=function(){this.bindChangeEvents(),this.updateCountMessage()},r.prototype.getDataset=function(t){var e={},o=t.attributes;if(o)for(var n=0;n<o.length;n++){var i=o[n],s=i.name.match(/^data-(.+)/);s&&(e[s[1]]=i.value)}return e},r.prototype.count=function(t){var e;this.options.maxwords?e=(t.match(/\S+/g)||[]).length:e=t.length;return e},r.prototype.bindChangeEvents=function(){var t=this.$textarea;t.addEventListener("keyup",this.checkIfValueChanged.bind(this)),t.addEventListener("focus",this.handleFocus.bind(this)),t.addEventListener("blur",this.handleBlur.bind(this))},r.prototype.checkIfValueChanged=function(){this.$textarea.oldValue||(this.$textarea.oldValue=""),this.$textarea.value!==this.$textarea.oldValue&&(this.$textarea.oldValue=this.$textarea.value,this.updateCountMessage())},r.prototype.updateCountMessage=function(){var t=this.$textarea,e=this.options,o=this.$countMessage,n=this.count(t.value),i=this.maxLength,s=i-n;n<i*(e.threshold?e.threshold:0)/100?(o.classList.add("govuk-character-count__message--disabled"),o.setAttribute("aria-hidden",!0)):(o.classList.remove("govuk-character-count__message--disabled"),o.removeAttribute("aria-hidden")),s<0?(t.classList.add("govuk-textarea--error"),o.classList.remove("govuk-hint"),o.classList.add("govuk-error-message")):(t.classList.remove("govuk-textarea--error"),o.classList.remove("govuk-error-message"),o.classList.add("govuk-hint"));var r,a,l="character";e.maxwords&&(l="word"),l+=-1==s||1==s?"":"s",r=s<0?"too many":"remaining",a=Math.abs(s),o.innerHTML="You have "+a+" "+l+" "+r},r.prototype.handleFocus=function(){this.valueChecker=setInterval(this.checkIfValueChanged.bind(this),1e3)},r.prototype.handleBlur=function(){clearInterval(this.valueChecker)},a.prototype.init=function(){var o=this.$module;s(this.$inputs,function(t){var e=t.getAttribute("data-aria-controls");e&&o.querySelector("#"+e)&&(t.setAttribute("aria-controls",e),t.removeAttribute("data-aria-controls"))}),"onpageshow"in window?window.addEventListener("pageshow",this.syncAllConditionalReveals.bind(this)):window.addEventListener("DOMContentLoaded",this.syncAllConditionalReveals.bind(this)),this.syncAllConditionalReveals(),o.addEventListener("click",this.handleClick.bind(this))},a.prototype.syncAllConditionalReveals=function(){s(this.$inputs,this.syncConditionalRevealWithInputState.bind(this))},a.prototype.syncConditionalRevealWithInputState=function(t){var e=this.$module.querySelector("#"+t.getAttribute("aria-controls"));if(e&&e.classList.contains("govuk-checkboxes__conditional")){var o=t.checked;t.setAttribute("aria-expanded",o),e.classList.toggle("govuk-checkboxes__conditional--hidden",!o)}},a.prototype.unCheckAllInputsExcept=function(e){s(document.querySelectorAll('input[type="checkbox"][name="'+e.name+'"]'),function(t){e.form===t.form&&t!==e&&(t.checked=!1)}),this.syncAllConditionalReveals()},a.prototype.unCheckExclusiveInputs=function(e){s(document.querySelectorAll('input[data-behaviour="exclusive"][type="checkbox"][name="'+e.name+'"]'),function(t){e.form===t.form&&(t.checked=!1)}),this.syncAllConditionalReveals()},a.prototype.handleClick=function(t){var e=t.target;"checkbox"===e.type&&(e.getAttribute("aria-controls")&&this.syncConditionalRevealWithInputState(e),e.checked&&("exclusive"===e.getAttribute("data-behaviour")?this.unCheckAllInputsExcept(e):this.unCheckExclusiveInputs(e)))},function(t){"document"in this&&"matches"in document.documentElement||(Element.prototype.matches=Element.prototype.webkitMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.mozMatchesSelector||function(t){for(var e=(this.document||this.ownerDocument).querySelectorAll(t),o=0;e[o]&&e[o]!==this;)++o;return!!e[o]})}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof global&&global||{}),function(t){"document"in this&&"closest"in document.documentElement||(Element.prototype.closest=function(t){for(var e=this;e;){if(e.matches(t))return e;e="SVGElement"in window&&e instanceof SVGElement?e.parentNode:e.parentElement}return null})}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof global&&global||{}),l.prototype.init=function(){var t=this.$module;t&&(t.focus(),t.addEventListener("click",this.handleClick.bind(this)))},l.prototype.handleClick=function(t){var e=t.target;this.focusTarget(e)&&t.preventDefault()},l.prototype.focusTarget=function(t){if("A"!==t.tagName||!1===t.href)return!1;var e=this.getFragmentFromUrl(t.href),o=document.getElementById(e);if(!o)return!1;var n=this.getAssociatedLegendOrLabel(o);return!!n&&(n.scrollIntoView(),o.focus({preventScroll:!0}),!0)},l.prototype.getFragmentFromUrl=function(t){return-1!==t.indexOf("#")&&t.split("#").pop()},l.prototype.getAssociatedLegendOrLabel=function(t){var e=t.closest("fieldset");if(e){var o=e.getElementsByTagName("legend");if(o.length){var n=o[0];if("checkbox"===t.type||"radio"===t.type)return n;var i=n.getBoundingClientRect().top,s=t.getBoundingClientRect();if(s.height&&window.innerHeight)if(s.top+s.height-i<window.innerHeight/2)return n}}return document.querySelector("label[for='"+t.getAttribute("id")+"']")||t.closest("label")},c.prototype.init=function(){this.$module&&this.setFocus()},c.prototype.setFocus=function(){var t=this.$module;"true"!==t.getAttribute("data-disable-auto-focus")&&"alert"===t.getAttribute("role")&&(t.getAttribute("tabindex")||(t.setAttribute("tabindex","-1"),t.addEventListener("blur",function(){t.removeAttribute("tabindex")})),t.focus())},u.prototype.init=function(){this.$module&&this.$menuButton&&this.$menu&&(this.syncState(this.$menu.classList.contains("govuk-header__navigation--open")),this.$menuButton.addEventListener("click",this.handleMenuButtonClick.bind(this)))},u.prototype.syncState=function(t){this.$menuButton.classList.toggle("govuk-header__menu-button--open",t),this.$menuButton.setAttribute("aria-expanded",t)},u.prototype.handleMenuButtonClick=function(){var t=this.$menu.classList.toggle("govuk-header__navigation--open");this.syncState(t)},d.prototype.init=function(){var o=this.$module;s(this.$inputs,function(t){var e=t.getAttribute("data-aria-controls");e&&o.querySelector("#"+e)&&(t.setAttribute("aria-controls",e),t.removeAttribute("data-aria-controls"))}),"onpageshow"in window?window.addEventListener("pageshow",this.syncAllConditionalReveals.bind(this)):window.addEventListener("DOMContentLoaded",this.syncAllConditionalReveals.bind(this)),this.syncAllConditionalReveals(),o.addEventListener("click",this.handleClick.bind(this))},d.prototype.syncAllConditionalReveals=function(){s(this.$inputs,this.syncConditionalRevealWithInputState.bind(this))},d.prototype.syncConditionalRevealWithInputState=function(t){var e=document.querySelector("#"+t.getAttribute("aria-controls"));if(e&&e.classList.contains("govuk-radios__conditional")){var o=t.checked;t.setAttribute("aria-expanded",o),e.classList.toggle("govuk-radios__conditional--hidden",!o)}},d.prototype.handleClick=function(t){var o=t.target;"radio"===o.type&&s(document.querySelectorAll('input[type="radio"][aria-controls]'),function(t){var e=t.form===o.form;t.name===o.name&&e&&this.syncConditionalRevealWithInputState(t)}.bind(this))},function(t){"document"in this&&"nextElementSibling"in document.documentElement||Object.defineProperty(Element.prototype,"nextElementSibling",{get:function(){for(var t=this.nextSibling;t&&1!==t.nodeType;)t=t.nextSibling;return t}})}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof global&&global||{}),function(t){"document"in this&&"previousElementSibling"in document.documentElement||Object.defineProperty(Element.prototype,"previousElementSibling",{get:function(){for(var t=this.previousSibling;t&&1!==t.nodeType;)t=t.previousSibling;return t}})}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof global&&global||{}),h.prototype.init=function(){"function"==typeof window.matchMedia?this.setupResponsiveChecks():this.setup()},h.prototype.setupResponsiveChecks=function(){this.mql=window.matchMedia("(min-width: 40.0625em)"),this.mql.addListener(this.checkMode.bind(this)),this.checkMode()},h.prototype.checkMode=function(){this.mql.matches?this.setup():this.teardown()},h.prototype.setup=function(){var t=this.$module,e=this.$tabs,o=t.querySelector(".govuk-tabs__list"),n=t.querySelectorAll(".govuk-tabs__list-item");if(e&&o&&n){o.setAttribute("role","tablist"),s(n,function(t){t.setAttribute("role","presentation")}),s(e,function(t){this.setAttributes(t),t.boundTabClick=this.onTabClick.bind(this),t.boundTabKeydown=this.onTabKeydown.bind(this),t.addEventListener("click",t.boundTabClick,!0),t.addEventListener("keydown",t.boundTabKeydown,!0),this.hideTab(t)}.bind(this));var i=this.getTab(window.location.hash)||this.$tabs[0];this.showTab(i),t.boundOnHashChange=this.onHashChange.bind(this),window.addEventListener("hashchange",t.boundOnHashChange,!0)}},h.prototype.teardown=function(){var t=this.$module,e=this.$tabs,o=t.querySelector(".govuk-tabs__list"),n=t.querySelectorAll(".govuk-tabs__list-item");e&&o&&n&&(o.removeAttribute("role"),s(n,function(t){t.removeAttribute("role","presentation")}),s(e,function(t){t.removeEventListener("click",t.boundTabClick,!0),t.removeEventListener("keydown",t.boundTabKeydown,!0),this.unsetAttributes(t)}.bind(this)),window.removeEventListener("hashchange",t.boundOnHashChange,!0))},h.prototype.onHashChange=function(t){var e=window.location.hash,o=this.getTab(e);if(o)if(this.changingHash)this.changingHash=!1;else{var n=this.getCurrentTab();this.hideTab(n),this.showTab(o),o.focus()}},h.prototype.hideTab=function(t){this.unhighlightTab(t),this.hidePanel(t)},h.prototype.showTab=function(t){this.highlightTab(t),this.showPanel(t)},h.prototype.getTab=function(t){return this.$module.querySelector('.govuk-tabs__tab[href="'+t+'"]')},h.prototype.setAttributes=function(t){var e=this.getHref(t).slice(1);t.setAttribute("id","tab_"+e),t.setAttribute("role","tab"),t.setAttribute("aria-controls",e),t.setAttribute("aria-selected","false"),t.setAttribute("tabindex","-1");var o=this.getPanel(t);o.setAttribute("role","tabpanel"),o.setAttribute("aria-labelledby",t.id),o.classList.add(this.jsHiddenClass)},h.prototype.unsetAttributes=function(t){t.removeAttribute("id"),t.removeAttribute("role"),t.removeAttribute("aria-controls"),t.removeAttribute("aria-selected"),t.removeAttribute("tabindex");var e=this.getPanel(t);e.removeAttribute("role"),e.removeAttribute("aria-labelledby"),e.classList.remove(this.jsHiddenClass)},h.prototype.onTabClick=function(t){if(!t.target.classList.contains("govuk-tabs__tab"))return!1;t.preventDefault();var e=t.target,o=this.getCurrentTab();this.hideTab(o),this.showTab(e),this.createHistoryEntry(e)},h.prototype.createHistoryEntry=function(t){var e=this.getPanel(t),o=e.id;e.id="",this.changingHash=!0,window.location.hash=this.getHref(t).slice(1),e.id=o},h.prototype.onTabKeydown=function(t){switch(t.keyCode){case this.keys.left:case this.keys.up:this.activatePreviousTab(),t.preventDefault();break;case this.keys.right:case this.keys.down:this.activateNextTab(),t.preventDefault()}},h.prototype.activateNextTab=function(){var t=this.getCurrentTab(),e=t.parentNode.nextElementSibling;if(e)var o=e.querySelector(".govuk-tabs__tab");o&&(this.hideTab(t),this.showTab(o),o.focus(),this.createHistoryEntry(o))},h.prototype.activatePreviousTab=function(){var t=this.getCurrentTab(),e=t.parentNode.previousElementSibling;if(e)var o=e.querySelector(".govuk-tabs__tab");o&&(this.hideTab(t),this.showTab(o),o.focus(),this.createHistoryEntry(o))},h.prototype.getPanel=function(t){return this.$module.querySelector(this.getHref(t))},h.prototype.showPanel=function(t){this.getPanel(t).classList.remove(this.jsHiddenClass)},h.prototype.hidePanel=function(t){this.getPanel(t).classList.add(this.jsHiddenClass)},h.prototype.unhighlightTab=function(t){t.setAttribute("aria-selected","false"),t.parentNode.classList.remove("govuk-tabs__list-item--selected"),t.setAttribute("tabindex","-1")},h.prototype.highlightTab=function(t){t.setAttribute("aria-selected","true"),t.parentNode.classList.add("govuk-tabs__list-item--selected"),t.setAttribute("tabindex","0")},h.prototype.getCurrentTab=function(){return this.$module.querySelector(".govuk-tabs__list-item--selected .govuk-tabs__tab")},h.prototype.getHref=function(t){var e=t.getAttribute("href");return e.slice(e.indexOf("#"),e.length)},t.initAll=function(t){var e=void 0!==(t=void 0!==t?t:{}).scope?t.scope:document;s(e.querySelectorAll('[data-module="govuk-button"]'),function(t){new n(t).init()}),s(e.querySelectorAll('[data-module="govuk-accordion"]'),function(t){new o(t).init()}),s(e.querySelectorAll('[data-module="govuk-details"]'),function(t){new i(t).init()}),s(e.querySelectorAll('[data-module="govuk-character-count"]'),function(t){new r(t).init()}),s(e.querySelectorAll('[data-module="govuk-checkboxes"]'),function(t){new a(t).init()}),new l(e.querySelector('[data-module="govuk-error-summary"]')).init(),new u(e.querySelector('[data-module="govuk-header"]')).init(),s(e.querySelectorAll('[data-module="govuk-notification-banner"]'),function(t){new c(t).init()}),s(e.querySelectorAll('[data-module="govuk-radios"]'),function(t){new d(t).init()}),s(e.querySelectorAll('[data-module="govuk-tabs"]'),function(t){new h(t).init()})},t.Accordion=o,t.Button=n,t.Details=i,t.CharacterCount=r,t.Checkboxes=a,t.ErrorSummary=l,t.Header=u,t.Radios=d,t.Tabs=h}),function(t,e){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define("DMGOVUKFrontend",["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).DMGOVUKFrontend={})}(void 0,function(t){"use strict";(function(t){"forEach"in NodeList.prototype||(NodeList.prototype.forEach=Array.prototype.forEach)}).call("object"===("undefined"==typeof window?"undefined":_typeof(window))&&window||"object"===("undefined"==typeof self?"undefined":_typeof(self))&&self||"object"===("undefined"==typeof global?"undefined":_typeof(global))&&global||{});var i={analytics:!1},s={_ga:"analytics",_gid:"analytics",_gat_govuk_shared:"analytics"};function n(t){for(var e=t+"=",o=document.cookie.split(";"),n=0,i=o.length;n<i;n++){for(var s=o[n];" "===s.charAt(0);)s=s.substring(1,s.length);if(0===s.indexOf(e))return decodeURIComponent(s.substring(e.length))}return null}function r(t,e,o){return void 0!==e?!1===e||null===e?u(t,"",{days:-1}):(void 0===o&&(o={days:30}),u(t,e,o)):n(t)}function a(){var t,e=n("dm_cookies_policy");if(!e)return null;try{t=JSON.parse(e)}catch(t){return null}return"object"!==_typeof(t)&&null!==t&&(t=JSON.parse(t)),t}function l(t){var e=a();for(var o in e=e||JSON.parse(JSON.stringify(i)),t)if(e[o]=t[o],!t[o])for(var n in s)s[n]===o&&(r(n,null),r(n)&&(document.cookie=n+"=;expires="+new Date+";domain="+window.location.hostname.replace(/^www\./,".")+";path=/"));u("dm_cookies_policy",JSON.stringify(e),{days:365})}function c(t,e){return"dm_cookies_policy"===t||null===e||!1===e||!!s[t]&&function(t,e){var o=a();if(!o&&s[t])return!0;o=a();try{return o[e]}catch(t){return console.error(t),!1}}(t,s[t])}function u(t,e,o){if(c(t,e)){void 0===o&&(o={});var n=t+"="+e+"; path=/";if(o.days){var i=new Date;i.setTime(i.getTime()+24*o.days*60*60*1e3),n=n+"; expires="+i.toGMTString()}"https:"===document.location.protocol&&(n+="; Secure"),document.cookie=n}}var e=/[^\s=/?&]+(?:@|%40)[^\s=/?&]+/g,d=function(t){this.value=t};function h(t){return"string"==typeof t?function(t){return t.replace(e,"[email]")}(t):"[object Array]"===Object.prototype.toString.call(t)||"[object Arguments]"===Object.prototype.toString.call(t)?function(t){for(var e=0,o=t.length;e<o;e++){var n=t[e];t[e]=h(n)}return t}(t):"object"===_typeof(t)?function(t){if(t){if(t instanceof d)return t.value;for(var e in t){var o=t[e];t[e]=h(o)}return t}}(t):t}function o(t){window.ga("create",t.trackingId,t.cookieDomain,{cookieExpires:24*t.expires*60*60}),window.ga("set","anonymizeIp",t.anonymizeIp),window.ga("set","displayFeaturesTask",t.displayFeaturesTask),window.ga("set","transport",t.transport)}function p(){var t,e,o,n,i;t=window,e=document,o="ga",t.GoogleAnalyticsObject=o,t.ga=t.ga||function(){(t.ga.q=t.ga.q||[]).push(arguments)},t.ga.l=1*new Date,n=e.createElement("script"),i=e.getElementsByTagName("script")[0],n.async=1,n.src="//www.google-analytics.com/analytics.js",i.parentNode.insertBefore(n,i)}function m(t,e,o){var n=window.location.pathname+window.location.search;window.ga("send","pageview",h(n))}function f(t,e,o){window.ga("create",t,"auto",{name:e}),window.ga("require","linker"),window.ga(e+".require","linker"),window.ga("linker:autoLink",o),window.ga(e+".linker:autoLink",o),window.ga(e+".set","anonymizeIp",!0),window.ga(e+".set","location",h(window.location.href)),window.ga(e+".send","pageview")}var y=Object.freeze({__proto__:null,SetupAnalytics:o,LoadGoogleAnalytics:p,TrackPageview:m,TrackEvent:function(t,e,o){var n={eventCategory:t,eventAction:e};(o=o||{}).label&&(n.eventLabel=o.label,delete o.label),"object"===_typeof(o)&&Object.assign(n,o),window.ga("send","event",h(n))},AddLinkedTrackerDomain:f});window.DMGOVUKFrontend=window.DMGOVUKFrontend||{};var b="UA-49258698-1",v="UA-145652997-1";function g(){if(!("analytics"in window.DMGOVUKFrontend)){window["ga-disable-".concat(b)]=!1;var t="www.digitalmarketplace.service.gov.uk"===document.domain?".digitalmarketplace.service.gov.uk":document.domain;p(),window.DMGOVUKFrontend.analytics=new o({trackingId:b,cookieDomain:t,anonymizeIp:!0,displayFeaturesTask:null,transport:"beacon",expires:365}),f(v,"govuk_shared",["www.gov.uk"]),m()}}window["ga-disable-".concat(b)]=!0;function w(t){this.$module=t}function k(t){this.$module=t}w.prototype.clearOldCookies=function(){for(var t=["seen_cookie_message","_ga","_gid"],e=0;e<t.length;e++)if(n(t[e])){var o=t[e]+"=;expires="+new Date+";domain="+window.location.hostname.replace(/^www\./,".")+";path=/";document.cookie=o}},w.prototype.init=function(t){this.$module.hideCookieMessage=this.hideCookieMessage.bind(this),this.$module.showConfirmationMessage=this.showConfirmationMessage.bind(this),this.$module.setCookieConsent=this.setCookieConsent.bind(this),this.$module.cookieBanner=document.querySelector(".dm-cookie-banner"),this.$module.cookieBannerConfirmationMessage=this.$module.querySelector(".dm-cookie-banner__confirmation"),this.setupCookieMessage()},w.prototype.setupCookieMessage=function(){var t=this;this.$hideLink=this.$module.querySelector("button[data-hide-cookie-banner]"),this.$hideLink&&this.$hideLink.addEventListener("click",this.$module.hideCookieMessage),this.$acceptCookiesLink=this.$module.querySelector("button[data-accept-cookies=true]"),this.$acceptCookiesLink&&this.$acceptCookiesLink.addEventListener("click",function(){return t.$module.setCookieConsent(!0)}),this.$rejectCookiesLink=this.$module.querySelector("button[data-accept-cookies=false]"),this.$rejectCookiesLink&&this.$rejectCookiesLink.addEventListener("click",function(){return t.$module.setCookieConsent(!1)}),this.showCookieMessage()},w.prototype.showCookieMessage=function(){var t=n("dm_cookies_policy");this.$module&&!t&&(this.$module.style.display="block")},w.prototype.hideCookieMessage=function(t){this.$module&&(this.$module.style.display="none"),t.target&&t.preventDefault()},w.prototype.setCookieConsent=function(t){l({analytics:t}),this.$module.showConfirmationMessage(t),this.$module.cookieBannerConfirmationMessage.focus(),t&&g()},w.prototype.showConfirmationMessage=function(t){var e=t?"You’ve accepted analytics cookies.":"You told us not to use analytics cookies.";this.$cookieBannerMainContent=document.querySelector(".dm-cookie-banner__wrapper"),this.$cookieBannerConfirmationMessage=document.querySelector(".dm-cookie-banner__confirmation-message"),this.$cookieBannerConfirmationMessage.insertAdjacentText("afterbegin",e),this.$cookieBannerMainContent.style.display="none",this.$module.cookieBannerConfirmationMessage.style.display="block"},k.prototype.init=function(){this.$module.submitSettingsForm=this.submitSettingsForm.bind(this),this.$module.addEventListener("submit",this.$module.submitSettingsForm),this.hideCookieBanner(),this.setInitialFormValues()},k.prototype.setInitialFormValues=function(){var t=a();t&&(this.hideWarningMessage(),(t.analytics?this.$module.querySelector("input[name=cookies-analytics][value=On]"):this.$module.querySelector("input[name=cookies-analytics][value=Off]")).checked=!0)},k.prototype.submitSettingsForm=function(t){t.preventDefault();for(var e=t.target.querySelectorAll("input[name=cookies-analytics]"),o={},n=0;n<e.length;n++){var i=e[n];if(i.checked){var s="On"===i.value;o.analytics=s;break}}return void 0===o.analytics?this.showError():(l(o),o.analytics&&!window.DMGOVUKFrontend.analytics&&g(),this.hideWarningMessage(),this.hideError(),this.showConfirmationMessage()),!1},k.prototype.showConfirmationMessage=function(){var t=document.querySelector("#dm-cookie-settings-confirmation"),e=document.querySelector(".dm-cookie-settings__prev-page"),o=k.prototype.getReferrerLink();document.body.scrollTop=document.documentElement.scrollTop=0,o&&o!==document.location.pathname?(e.href=o,e.style.display="block"):e.style.display="none",t.style.display="block"},k.prototype.showError=function(){var t=document.querySelector("#dm-cookie-settings-error");null!==t&&(t.style.display="block",document.body.scrollTop=document.documentElement.scrollTop=0),this.showErrorMessage()},k.prototype.hideError=function(){var t=document.querySelector("#dm-cookie-settings-error");null!==t&&(t.style.display="none"),this.hideErrorMessage()},k.prototype.hideWarningMessage=function(){var t=document.querySelector("#dm-cookie-settings-warning");null!==t&&(t.style.display="none")},k.prototype.hideErrorMessage=function(){var t=document.querySelector("#dm-cookie-settings-error-message");null!==t&&(t.style.display="none");var e=document.querySelector(".govuk-form-group--error");e&&e.classList.remove("govuk-form-group--error")},k.prototype.showErrorMessage=function(){var t=document.querySelector("#dm-cookie-settings .govuk-form-group");t&&t.classList.add("govuk-form-group--error");var e=document.createElement("span");e.setAttribute("id","dm-cookie-settings-error-message"),e.className="govuk-error-message",e.innerHTML='<span class="govuk-visually-hidden">Error:</span> Select yes to accept analytics cookies';var o=document.querySelector("#cookie-settings-1, .govuk-radios--inline");o.parentElement.insertBefore(e,o)},k.prototype.hideCookieBanner=function(){var t=document.querySelector(".dm-cookie-banner");null!==t&&(t.style.display="none")},k.prototype.getReferrerLink=function(){return!!document.referrer&&new URL(document.referrer).pathname};function C(t,e,o){var n="next"===t?e.nextElementSibling:e.previousElementSibling;if(!o)return n;for(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);n;){if(n.matches(o))return n;n="next"===t?n.nextElementSibling:n=n.previousElementSibling}}function E(t){this.$module=t,this.$allVisibleItems=t.querySelectorAll(".dm-list-input__item--visible"),this.$addAnotherButton=t.querySelector(".dm-list-input__item-add"),this.$allItems=t.querySelectorAll(".dm-list-input__item"),this.visibleItems=0,this.itemContainerClass="dm-list-input__item-container",this.hiddenItemClass="dm-list-input__item--hidden",this.visibleItemClass="dm-list-input__item--visible",this.itemInputClass="dm-list-input__item-input",this.itemErrorClass="dm-list-input__item--error",this.itemErrorMsgClass="dm-list-input-error-message",this.itemCounterClass="dm-list-input__counter",this.inputErrorClass="govuk-input--error",this.removeButtonClass="dm-list-input__item-remove",this.hiddenRemoveButtonClass="dm-list-input__item-remove--hidden",this.formGroupErrorClass="govuk-form-group--error",this.hiddenAddButtonClass="dm-list-input__item-add--hidden",this.addButtonRemainingClass="dm-list-input__js-remaining-counter"}function S(t){this.$optionSelect=t,this.$options=this.$optionSelect.querySelectorAll("input[type='checkbox']"),this.$optionsContainer=this.$optionSelect.querySelector(".js-options-container"),this.$optionList=this.$optionsContainer.querySelector(".js-auto-height-inner"),this.$allCheckboxes=this.$optionsContainer.querySelectorAll(".govuk-checkboxes__item"),this.checkedCheckboxes=[]}function A(t){this.$module=t,this.toggleTarget=this.$module.querySelector(".js-class-toggle")}E.prototype.init=function(){this.$module&&(this.hideEmptyItems(),this.updateAllCounters(),this.bindRemoveClickEvent(),this.toggleAddAnotherButton(),this.bindAddClickEvent())},E.prototype.hideEmptyItems=function(){var n=0,i=0;this.$allItems.forEach(function(t){var e=t.querySelector("."+this.itemInputClass),o=t.querySelector("."+this.removeButtonClass);""===e.value?(0===n?o.classList.remove(this.hiddenRemoveButtonClass):1===n&&0===i?o.classList.remove(this.hiddenRemoveButtonClass):(t.classList.add(this.hiddenItemClass),t.classList.remove(this.visibleItemClass),o.classList.add(this.hiddenRemoveButtonClass),e.setAttribute("disabled","true")),n+=1):(t.classList.remove(this.hiddenItemClass),t.classList.add(this.visibleItemClass),o.classList.remove(this.hiddenRemoveButtonClass),i+=1)},this),this.$allVisibleItems=this.$module.querySelectorAll("."+this.visibleItemClass)},E.prototype.bindRemoveClickEvent=function(){this.$module.addEventListener("click",function(t){var e=t.target;if("BUTTON"===e.tagName&&e.classList.contains(this.removeButtonClass)){var o=e.parentNode.parentNode,n=o.querySelector("."+this.itemInputClass);if(n.value="",n.removeAttribute("value"),n.setAttribute("disabled","true"),e.classList.add(this.hiddenRemoveButtonClass),o.classList.add(this.hiddenItemClass),o.classList.remove(this.visibleItemClass),this.$allVisibleItems=this.$module.querySelectorAll("."+this.visibleItemClass),o.classList.contains(this.itemErrorClass)){o.classList.remove(this.itemErrorClass);var i=o.querySelector("."+this.formGroupErrorClass);i.classList.remove(this.formGroupErrorClass),i.querySelector("."+this.itemErrorMsgClass).remove();var s=i.querySelector("."+this.inputErrorClass),r=s.getAttribute("id"),a=s.getAttribute("aria-describedby");s.setAttribute("aria-describedby",a.replace(r+"-error","")),s.classList.remove(this.inputErrorClass)}if(1===this.$allVisibleItems.length){this.$module.querySelectorAll("."+this.removeButtonClass).forEach(function(t){t.classList.add(this.hiddenRemoveButtonClass)},this),this.$allVisibleItems[0].querySelector("input").focus()}else{var l=C("next",o,"."+this.visibleItemClass);if(l)l.querySelector("input").focus();else C("previous",o,"."+this.visibleItemClass).querySelector("input").focus()}this.updateAllCounters(),this.toggleAddAnotherButton()}}.bind(this))},E.prototype.updateCounters=function(){var t=this.$allVisibleItems,e=1;t.forEach(function(t){t.querySelectorAll("."+this.itemCounterClass).forEach(function(t){t.innerHTML=e}),e+=1},this)},E.prototype.updateRemainingCounter=function(){var t=this.$allVisibleItems,e=this.$allItems.length;this.$module.querySelector("."+this.addButtonRemainingClass).innerHTML=e-t.length},E.prototype.bindAddClickEvent=function(){this.$addAnotherButton.addEventListener("click",function(){var t=this.$module.querySelector("."+this.hiddenItemClass),e=t.querySelector("."+this.itemInputClass);t&&(e.removeAttribute("disabled"),this.$module.querySelector("."+this.itemContainerClass).appendChild(t),t.classList.remove(this.hiddenItemClass),t.classList.add(this.visibleItemClass),this.$allVisibleItems=this.$module.querySelectorAll("."+this.visibleItemClass),this.updateAllCounters(),t.querySelector("."+this.removeButtonClass).classList.remove(this.hiddenRemoveButtonClass),e.focus(),this.toggleAddAnotherButton(),1<this.$allVisibleItems.length&&this.$module.querySelectorAll("."+this.removeButtonClass).forEach(function(t){t.classList.remove(this.hiddenRemoveButtonClass)},this))}.bind(this))},E.prototype.toggleAddAnotherButton=function(){this.$module.querySelector("."+this.hiddenItemClass)?this.$addAnotherButton.classList.remove(this.hiddenAddButtonClass):this.$addAnotherButton.classList.add(this.hiddenAddButtonClass)},E.prototype.updateAllCounters=function(){this.updateCounters(),this.updateRemainingCounter()},S.prototype.init=function(){this.$optionSelect.addEventListener("change",function(t){var e=t.target;"INPUT"===e.tagName&&"checkbox"===e.type&&this.updateCheckedCount()}.bind(this)),this.replaceHeadingSpanWithButton(),this.$optionSelect.classList.add("js-collapsible"),this.$optionSelect.querySelector(".js-container-button").addEventListener("click",this.toggleOptionSelect.bind(this)),"true"===this.$optionSelect.dataset.closedOnLoad?this.close():this.setupHeight();var t=this.checkedString();t&&this.attachCheckedCounter(t)},S.prototype.getAllCheckedCheckboxes=function(){this.checkedCheckboxes=[];var e=this;this.$allCheckboxes.forEach(function(t){t.querySelector("input[type=checkbox]").checked&&e.checkedCheckboxes.push(t)},this)},S.prototype.replaceHeadingSpanWithButton=function(){var t=this.$optionSelect.querySelector(".js-container-button"),e=t.innerHTML,o=document.createElement("button");o.classList.add("js-container-button","dm-option-select__title","dm-option-select__button"),o.setAttribute("type","button"),o.setAttribute("aria-expanded",!0),o.setAttribute("id",t.id),o.setAttribute("aria-controls",this.$optionsContainer.id),o.innerHTML=e,t.insertAdjacentHTML("afterend",o.outerHTML),t.parentNode.removeChild(t)},S.prototype.attachCheckedCounter=function(t){this.$optionSelect.querySelector(".js-container-button").insertAdjacentHTML("afterend",'<div class="dm-option-select__selected-counter js-selected-counter">'+t+"</div>")},S.prototype.updateCheckedCount=function(){var t=this.checkedString(),e=this.$optionSelect.querySelector(".js-selected-counter");t?e?e.textContent=t:this.attachCheckedCounter(t):e.parentNode.removeChild(e)},S.prototype.checkedString=function(){this.getAllCheckedCheckboxes();var t=this.checkedCheckboxes.length,e=!1;return 0<t&&(e=t+" selected"),e},S.prototype.toggleOptionSelect=function(t){this.isClosed()?this.open():this.close(),t.preventDefault()},S.prototype.open=function(){this.isClosed()&&(this.$optionSelect.querySelector(".js-container-button").setAttribute("aria-expanded",!0),this.$optionSelect.classList.remove("js-closed"),this.$optionSelect.classList.add("js-opened"),this.$optionsContainer.style.height||this.setupHeight())},S.prototype.close=function(){this.$optionSelect.classList.remove("js-opened"),this.$optionSelect.classList.add("js-closed"),this.$optionSelect.querySelector(".js-container-button").setAttribute("aria-expanded",!1)},S.prototype.isClosed=function(){return this.$optionSelect.classList.contains("js-closed")},S.prototype.setContainerHeight=function(t){this.$optionsContainer.style.height=t+"px"},S.prototype.isCheckboxVisible=function(t){var e=this.$optionsContainer.clientHeight,o=this.$optionList.getBoundingClientRect().top+document.body.scrollTop;return t.getBoundingClientRect().top+document.body.scrollTop-o<e},S.prototype.getVisibleCheckboxes=function(){var t=[].slice.call(this.$options).filter(this.isCheckboxVisible.bind(this));return t.length<this.$options&&t.push(this.$options[t.length]),t},S.prototype.setupHeight=function(){var t=this.$optionsContainer.clientHeight,e=this.$optionList.offsetHeight;if(null===this.$optionsContainer.offsetParent&&(e=t=200),e<t+50)this.setContainerHeight(e+1);else{var o=this.getVisibleCheckboxes(),n=o[o.length-1],i=n.parentNode.offsetTop;this.setContainerHeight(i+parseFloat(window.getComputedStyle(n,null).height.replace("px",""))/1.5)}},A.prototype.init=function(){this.$module&&(this.$module.addFocusClass=this.addFocusClass.bind(this),this.$module.removeFocusClassFromEmptyInput=this.removeFocusClassFromEmptyInput.bind(this),this.inputIsEmpty()||this.addFocusClass(),this.toggleTarget.addEventListener("focus",this.$module.addFocusClass),this.toggleTarget.addEventListener("blur",this.$module.removeFocusClassFromEmptyInput))},A.prototype.inputIsEmpty=function(){return""===this.toggleTarget.value},A.prototype.addFocusClass=function(){this.toggleTarget.classList.add("focus")},A.prototype.removeFocusClassFromEmptyInput=function(){this.inputIsEmpty()&&this.toggleTarget.classList.remove("focus")},t.Analytics=y,t.CookieBanner=w,t.CookieSettings=k,t.ListInput=E,t.OptionSelect=S,t.SearchBox=A,t.initAll=function(t){var e=void 0!==(t=void 0!==t?t:{}).scope?t.scope:document,o=document.querySelector('[data-module="dm-cookie-banner"]');o&&new w(o).init();var n=document.querySelector('[data-module="dm-cookie-settings"]');n&&new k(n).init();var i=a();i&&i.analytics&&g(),e.querySelectorAll('[data-module="dm-list-input"]').forEach(function(t){new E(t).init()}),e.querySelectorAll('[data-module="dm-option-select"]').forEach(function(t){new S(t).init()}),e.querySelectorAll('[data-module="dm-search-box"]').forEach(function(t){new A(t).init()})},t.initAnalytics=g,Object.defineProperty(t,"__esModule",{value:!0})}),GOVUKFrontend.initAll(),DMGOVUKFrontend.initAll();
//# sourceMappingURL=maps/application.js.map